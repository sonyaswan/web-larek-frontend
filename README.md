# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура 

В приложении используется MVP-архитектура

### Базовые классы

#### Класс `Api`
Класс `Api` имеет свойства `baseUrl` и `options`, а также методы `get` и `post`. Метод `handleResponse` используется для обработки ответов. Метод `get` выполняет GET-запрос к указанному URI, а метод `post` выполняет POST-, PUT- или DELETE-запрос в зависимости от переданного значения `method`.

#### Класс `EventEmitter`

Класс `EventEmitter` реализует интерфейс `IEvents` и имеет поле `_events`, которое является картой, содержащей события и их подписчиков (хранит информацию о том, какие функции подписаны на какие события). Методы `on`, `off`, `emit`, `onAll`, `offAll` и `trigger` используются для установки, удаления и инициирования событий. Метод `on` устанавливает обработчик на событие, `off` снимает обработчик с события, `emit` инициирует событие с данными, `onAll` слушает все события, `offAll` сбрасывает все обработчики, а `trigger` создает коллбек триггер, генерирующий событие при вызове.

#### Класс `Model<T>`

Абстрактный класс `Model<T>` является базовой моделью, которая отличается от простых объектов с данными. Он имеет свойства `data` и `events`. Свойство `data` содержит данные модели, а `events` - объект событий. Метод `emitChanges`, используется для информирования всех подписчиков о том, что модель изменилась и вызывает метод `emit` объекта `events`, передавая ему событие и, возможно, объект данных. 
Этот класс служит базовой моделью и может быть использован для отличия простых объектов с данными от объектов, которые наследуются от `Model<T>`. 

### Слой данных (Model)

#### Класс `AuctionAPI`

Класс `AuctionAPI` является расширением класса `Api` и имеет дополнительное поле `cdn`. Конструктор класса `AuctionAPI` принимает `cdn` и `baseUrl` в качестве аргументов и вызывает конструктор родительского класса `Api`.

Методы:
* `getProductList` использует метод `get` класса `Api` для получения списка товаров и возвращает промис с массивом товаров. 
* `getProductItem` также использует метод `get` для получения информации о товаре по его `id` и возвращает промис с объектом товара. 
* `orderProducts` использует метод `post` для размещения заказа и возвращает промис с результатом заказа.

Класс `AuctionAPI` также использует типы и интерфейсы `ProductStatus`, `productId`, `IProductItem`, `paymentType`, `IOrderForm`, `IOrder` и `IOrderResult`.

#### Класс `productModel`

Класс `productModel` расширяет класс `Model<T>` и реализует интерфейс `IProductItem`.

Поля:
* `id` - уникальный идентификатор продукта
* `description` - описание продукта
* `image` - путь к изображению продукта
* `title` - название продукта
* `category` - категория продукта, является значением из перечисления ProductStatus
* `price` - цена продукта, которая может быть числом или null, если продукт не имеет цены

#### Класс `AppState`

Класс `AppState` расширяет класс `Model<T>` и реализует интерфейс `IAppState`. Класс AppState предоставляет функционал для управления приложением и его элементами: каталогом продуктов, корзиной, превью и заказом пользователя.

Поля:
* `catalog` - содержит список продуктов из каталога
* `basket` - представляет корзину пользователя, содержащую сет из идентификаторов продуктов
* `preview` - содержит идентификатор продукта, который в данный момент отображается в режиме превью
* `order` -  представляет заказ пользователя, который может быть пустым, если заказ еще не был создан
* `loading` -  указывает, происходит ли в данный момент загрузка

Методы:
* `clearBasket` - очищает корзину пользователя
* `clearOrder` - очищает корзину пользователя
* `addToBasket` -  добавляет продукт в корзину пользователя
* `removeFromBasket` - удаляет продукт из корзины пользователя
* `getStatusBasket` - возвращает количество продуктов в корзине пользователя
* `getProductsFromBasket` - возвращает список продуктов из корзины пользователя с описанием
* `getTotal` - вычисляет общую стоимость заказа пользователя
* `setCatalog` - заполняет данные каталога продуктов
* `setPreview` - заполняет данные превью продукта пользователя
* `setOrderField` - заполняет данные заказа пользователя
* `validateOrder` - проверяет поля заказа пользователя

### Слой отображения (View)




